<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.easypoiexcel.rep.dao.ApplicationMapper" >
  <resultMap id="AppBaseResultMap" type="com.example.easypoiexcel.excelDTO.AppFileDTO" >
    <result column="app_id" property="appId" jdbcType="VARCHAR" />
    <result column="name_" property="name" jdbcType="VARCHAR" />
    <!-- association可以指定联合的javaBean对象
    property="grade":指定哪个属性是联合的对象
    javaType:指定这个属性对象的类型【不能省略】-->
    <collection property="fileUserNums" javaType="ArrayList" ofType="com.example.easypoiexcel.entity.FileUserNum" column="{app_id = app_id}"  select="selectByAppId" >

    </collection>
  </resultMap>

  <select id="getAppFile" resultMap="AppBaseResultMap">
      SELECT app.app_id, app.name_
      FROM c_application app
  </select>

    <select id="selectByAppId" parameterType="map" resultType="com.example.easypoiexcel.entity.FileUserNum">
        select
        id, app_id appId, type type, data_type dataType, num, fyear_month fyearMonth, create_time createTime, create_user createUser
        from f_file_usernum file
        where file.app_id = #{app_id, jdbcType=VARCHAR}
    </select>

</mapper>